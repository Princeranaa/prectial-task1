<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body class="bg-zinc-200">

    <div class="container mx-auto p-6 bg-zinc-300">
        <div class="flex justify-between gap-8">
          <!-- User wallet model Info Section -->
            <div class="w-[400px] border border-black bg-white rounded-lg shadow-md p-6">
                <div class="flex flex-col items-center">
                    <div class="w-32 h-32 bg-gray-200 rounded-full mb-4 overflow-hidden">
                        <img src="<%= user.photo %>" alt="Profile" class="w-full h-full object-cover">
                    </div>
                    <h2 class="text-xl text-gray-600 mb-4 font-semibold"><%= user.userName %></h2>
                </div>
                <div class="space-y-3 text-gray-600">
                    <div class="space-y-3 text-gray-600">
                        <% if (wallet && wallet.walletTotalBalance !== undefined) { %>
                            <p class="card-text text-black "><strong>Total Balance: </strong> <%= wallet.walletTotalBalance %></p>
                            <p class="card-text text-black"><strong>Current Amount: </strong> <%= wallet.walletAmount %></p>
                            <p class="card-text text-black"><strong>Winnings Amount: </strong> <%= wallet.winningsAmount %></p>
                        <% } else { %>
                            <p>No wallet information found.</p>
                        <% } %>
                    </div>
                    
                    
                </div>
                <div class="mt-4 flex justify-between">
                    <button onclick="togglePopup('passwordPopup')" class="bg-blue-500 text-white px-4 py-2 rounded">Update Password</button>
                    <button onclick="togglePopup('balancePopup')" class="bg-green-500 text-white px-4 py-2 rounded">Update Balance</button>
                </div>
            </div>

            <!-- User Personal Details Section -->
            <div class="flex-1 bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl text-gray-700 mb-6 font-semibold">User Details</h3>
                <div class="space-y-4">
                    <div class="flex border-b border-gray-300 py-3"><span class="w-1/3 text-zinc-900">User ID</span><span class="w-2/3"><%= user.id || 'N/A' %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">User Name</span><span class="w-2/3"><%= user.userName %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">Email</span><span class="w-2/3"><%= user.email || '-' %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">Phone</span><span class="w-2/3"><%= user.phone || '-' %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">Status</span><span class="w-2/3 text-green-600"><%= user.status || '-' %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">Registration Date</span><span class="w-2/3"><%= user.createdAt ? new Date(user.createdAt).toLocaleString() : 'N/A' %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">Last Login Device</span><span class="w-2/3"><%= user.lastLoginDevice || 'N/A' %></span></div>
                    <div class="flex border-b py-3 border-gray-300"><span class="w-1/3 text-zinc-900">Last Login Date</span><span class="w-2/3"><%= user.lastLoginDate || 'N/A' %></span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Update Popup -->
    <div id="passwordPopup" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
        <div class="bg-white p-6 rounded-lg shadow-md w-96">
            <h3 class="text-lg font-semibold mb-4">Update Password</h3>
            <form method="POST" action="/api/user/user/update-password/<%= user.id %>">
                <input type="password" name="newPassword" placeholder="New Password" class="w-full p-2 border rounded mb-2" >
                <input type="password" name="confirmPassword" placeholder="Confirm Password" class="w-full p-2 border rounded mb-4" >
                <div class="flex justify-between">
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Submit</button>
                    <button type="button" onclick="togglePopup('passwordPopup')" class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Balance Update Popup -->
    <div id="balancePopup" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
        <div class="bg-white p-6 rounded-lg shadow-md w-96">
            <h3 class="text-lg font-semibold mb-4">Update Balance</h3>
            <form method="POST" action="/api/admin/update-wallet/<%= user.id %>">
                <input type="number" name="balance" placeholder="Balance by Admin" class="w-full p-2 border rounded mb-2" required>
                <input type="number" name="withdrawAmount" placeholder="Withdraw Amount" class="w-full p-2 border rounded mb-4">
                <div class="flex justify-between">
                    <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Submit</button>
                    <button type="button" onclick="togglePopup('balancePopup')" class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function togglePopup(id) {
            document.getElementById(id).classList.toggle('hidden');
        }
        
    </script>
</body>
</html>









